<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free IPTV - Configuration</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.15); }
            50% { box-shadow: 0 0 30px rgba(0, 212, 255, 0.3); }
        }

        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #080810;
            color: #e0dcd6;
            min-height: 100vh;
            padding: 20px;
        }

        body::before {
            content: '';
            position: fixed;
            top: -20%;
            left: -10%;
            width: 50%;
            height: 50%;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.06) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        body::after {
            content: '';
            position: fixed;
            bottom: -20%;
            right: -10%;
            width: 50%;
            height: 50%;
            background: radial-gradient(circle, rgba(0, 100, 255, 0.04) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .app-logo {
            display: flex;
            align-items: center;
        }

        .app-logo-img {
            height: 44px;
            width: auto;
        }

        h1 { color: #00d4ff; margin-bottom: 10px; font-size: 28px; font-weight: 600; }

        .subtitle { color: #888; margin-bottom: 30px; }

        .card {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) backwards;
        }

        .card:nth-child(1) { animation-delay: 0.05s; }
        .card:nth-child(2) { animation-delay: 0.1s; }
        .card:nth-child(3) { animation-delay: 0.15s; }
        .card:nth-child(4) { animation-delay: 0.2s; }

        .card h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #00d4ff;
            padding-left: 12px;
            border-left: 3px solid #00d4ff;
            font-weight: 600;
        }

        .form-group { margin-bottom: 15px; }

        label {
            display: block;
            margin-bottom: 6px;
            color: #888;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }

        input, select {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.04);
            color: #fff;
            font-size: 16px;
            font-family: 'Outfit', sans-serif;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        input::placeholder { color: #555; }

        input:focus, select:focus {
            border-color: #00d4ff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.15), 0 0 15px rgba(0, 212, 255, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
            font-family: 'Outfit', sans-serif;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn:hover { transform: translateY(-1px); }

        .btn-primary {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: #000;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.25);
        }

        .btn-primary:hover {
            box-shadow: 0 6px 25px rgba(0, 212, 255, 0.35);
        }

        .btn-success {
            background: linear-gradient(135deg, #34d058, #28a745);
            color: #fff;
            box-shadow: 0 4px 15px rgba(52, 208, 88, 0.25);
        }

        .btn-danger {
            background: #e05050;
            color: #fff;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #e0dcd6;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.12);
        }

        .type-buttons { display: flex; }

        .type-btn {
            flex: 1;
            padding: 12px 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.04);
            color: #888;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .type-btn:first-child { border-radius: 10px 0 0 10px; }
        .type-btn:last-child { border-radius: 0 10px 10px 0; }

        .type-btn.active {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: #000;
            border-color: transparent;
            font-weight: 600;
        }

        .api-desc { font-size: 13px; color: #666; margin-bottom: 8px; }
        .api-desc a { color: #00d4ff; text-decoration: none; }
        .api-desc a:hover { text-decoration: underline; }

        .warning-hint {
            background: rgba(255, 165, 0, 0.1);
            border: 1px solid rgba(255, 165, 0, 0.3);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 15px;
            font-size: 13px;
            color: #ffa500;
        }

        .playlist-item {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        .playlist-item .info { flex: 1; }
        .playlist-item .name { font-weight: 600; color: #fff; }
        .playlist-item .type { color: #666; font-size: 13px; }

        .code-input {
            font-size: 32px;
            text-align: center;
            letter-spacing: 8px;
            text-transform: uppercase;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
            background: rgba(0, 212, 255, 0.04);
            border: 2px solid rgba(0, 212, 255, 0.2);
            animation: pulseGlow 3s ease-in-out infinite;
        }

        .code-input:focus {
            border-color: #00d4ff;
            animation: none;
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.2), 0 0 30px rgba(0, 212, 255, 0.15);
        }

        .hidden { display: none !important; }

        .success-msg {
            background: linear-gradient(135deg, #34d058, #28a745);
            color: #fff;
            padding: 30px;
            border-radius: 16px;
            text-align: center;
            font-size: 18px;
            font-weight: 500;
            box-shadow: 0 8px 30px rgba(52, 208, 88, 0.25);
            animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .error-msg {
            background: rgba(224, 80, 80, 0.15);
            border: 1px solid rgba(224, 80, 80, 0.4);
            color: #ff8080;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
        }

        .category-section { margin-bottom: 20px; }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .category-title {
            font-size: 15px;
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .category-title .icon { margin-right: 8px; font-size: 20px; }

        .category-toggle {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            font-family: 'Outfit', sans-serif;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .category-toggle.active {
            background: rgba(52, 208, 88, 0.25);
            color: #34d058;
            border: 1px solid rgba(52, 208, 88, 0.3);
        }

        .category-toggle.inactive {
            background: rgba(255, 255, 255, 0.06);
            color: #666;
            border: 1px solid rgba(255, 255, 255, 0.06);
        }

        .subcategory-tabs {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            padding-bottom: 8px;
        }

        .subcategory-tab {
            padding: 6px 12px;
            margin-right: 5px;
            margin-bottom: 5px;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.06);
            color: #888;
            font-family: 'Outfit', sans-serif;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .subcategory-tab.active {
            background: rgba(0, 212, 255, 0.15);
            border-color: rgba(0, 212, 255, 0.3);
            color: #00d4ff;
        }

        .subcategory-tab:hover { background: rgba(255, 255, 255, 0.08); }

        .keywords-container {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        .keyword-chip {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: #00d4ff;
            padding: 5px 12px;
            border-radius: 20px;
            margin: 3px;
            font-size: 13px;
            display: flex;
            align-items: center;
            transition: background 0.2s;
        }

        .keyword-chip .remove {
            margin-left: 6px;
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.2s;
        }

        .keyword-chip .remove:hover { opacity: 1; }

        .add-keyword-row {
            display: flex;
            margin-top: 5px;
        }

        .add-keyword-row input {
            flex: 1;
            padding: 8px;
            font-size: 14px;
            border-radius: 8px 0 0 8px;
            border-right: none;
        }

        .add-keyword-row button {
            padding: 8px 15px;
            border: none;
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: #000;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            font-family: 'Outfit', sans-serif;
        }

        .custom-categories {
            margin-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
            padding-top: 20px;
        }

        .custom-category-item {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 10px;
        }

        .custom-category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .custom-category-name {
            font-weight: 600;
            display: flex;
            align-items: center;
            color: #fff;
        }

        .custom-category-name .icon { margin-right: 8px; }

        .custom-icon-preview {
            width: 28px;
            height: 28px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            margin-right: 8px;
        }

        .add-custom-category {
            background: rgba(0, 212, 255, 0.06);
            border: 2px dashed rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            padding: 18px;
            text-align: center;
            cursor: pointer;
            color: #00d4ff;
            margin-top: 15px;
            font-weight: 500;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .add-custom-category:hover {
            background: rgba(0, 212, 255, 0.12);
            border-color: #00d4ff;
        }

        .new-category-form { margin-top: 15px; }

        .new-category-form .form-row {
            display: flex;
            margin-bottom: 10px;
        }

        .new-category-form .form-row > * { margin-right: 10px; }
        .new-category-form .form-row > *:last-child { margin-right: 0; }

        .icon-selector {
            display: flex;
            flex-wrap: wrap;
            margin: 10px 0;
        }

        .icon-option {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            margin: 3px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .icon-option:hover { background: rgba(255, 255, 255, 0.08); }

        .icon-option.selected {
            border-color: #00d4ff;
            background: rgba(0, 212, 255, 0.15);
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.2);
        }

        .icon-type-tabs {
            display: flex;
            margin-bottom: 10px;
        }

        .icon-type-tab {
            flex: 1;
            padding: 8px;
            text-align: center;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            font-size: 14px;
            font-family: 'Outfit', sans-serif;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .icon-type-tab:first-child { border-radius: 8px 0 0 8px; }
        .icon-type-tab:last-child { border-radius: 0 8px 8px 0; }

        .icon-type-tab.active {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: #000;
            border-color: transparent;
            font-weight: 600;
        }

        .custom-icon-inputs {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .custom-icon-inputs input[type="text"] {
            width: 60px;
            text-align: center;
            font-size: 18px;
            padding: 8px;
            margin-right: 10px;
        }

        .custom-icon-inputs input[type="color"] {
            width: 50px;
            height: 40px;
            padding: 2px;
            margin-right: 10px;
            cursor: pointer;
            border-radius: 8px;
        }

        .custom-icon-inputs .preview {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
        }

        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 5px 0;
            transition: color 0.2s;
        }

        .collapsible-header h2 { margin: 0; }

        .collapsible-header .arrow {
            font-size: 18px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: #555;
        }

        .collapsible-header.collapsed .arrow { transform: rotate(-90deg); }
        .collapsible-header:hover h2 { color: #00d4ff; }

        .collapsible-content {
            overflow: hidden;
            transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            max-height: 2000px;
        }

        .collapsible-content.collapsed {
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
        }

        .range-row {
            display: flex;
            align-items: center;
        }

        .range-row input[type="range"] {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 3px;
            outline: none;
        }

        .range-row input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00d4ff;
            cursor: pointer;
            box-shadow: 0 0 6px rgba(0, 212, 255, 0.4);
        }

        .range-label {
            min-width: 50px;
            text-align: right;
            color: #00d4ff;
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
            margin-left: 12px;
        }
    </style>
</head>
<body>
    <div class="container">

        <header class="app-header">
            <div class="app-logo">
                <img src="icon.png" alt="Free IPTV" class="app-logo-img">
            </div>
            <select id="page-locale" style="width: auto; padding: 8px 12px; font-size: 14px; border-radius: 10px;">
                <option value="en">üá¨üáß English</option>
                <option value="fr">üá´üá∑ Fran√ßais</option>
                <option value="es">üá™üá∏ Espa√±ol</option>
                <option value="de">üá©üá™ Deutsch</option>
                <option value="it">üáÆüáπ Italiano</option>
                <option value="nl">üá≥üá± Nederlands</option>
                <option value="pl">üáµüá± Polski</option>
                <option value="pt">üáµüáπ Portugu√™s</option>
                <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                <option value="tr">üáπüá∑ T√ºrk√ße</option>
                <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            </select>
        </header>

        <div id="code-step" class="card">
            <h2 data-i18n="tvCode">TV Code</h2>
            <p style="color:#aaa; margin-bottom:15px;" data-i18n="enterCode">Enter the code displayed on your TV</p>
            <div class="form-group">
                <input type="text" id="tv-code" class="code-input" placeholder="ABCD12" maxlength="6" autocomplete="off" autofocus>
            </div>
        </div>

        <div id="config-step" class="hidden">
            <div class="card hidden">
                <h2 data-i18n="savedPlaylists">Saved playlists</h2>
                <div id="playlists-list"></div>
            </div>

            <div id="add-playlist-form" class="card">
                <h2 id="form-title" data-i18n="addPlaylist">Add a playlist</h2>
                <div class="form-group">
                    <label data-i18n="nameOptional">Name (optional)</label>
                    <input type="text" id="pl-name" data-i18n-placeholder="myPlaylist">
                </div>
                <div class="form-group">
                    <label data-i18n="type">Type</label>
                    <div class="type-buttons">
                        <button type="button" class="type-btn active" data-type="provider" onclick="selectType('provider')">API Server</button>
                        <button type="button" class="type-btn" data-type="m3u" onclick="selectType('m3u')">URL M3U</button>
                    </div>
                </div>
                <div id="provider-fields">
                    <div class="form-group">
                        <label data-i18n="serverUrl">Server URL</label>
                        <input type="text" id="pl-server" placeholder="http://example.com:8080">
                    </div>
                    <div class="form-group">
                        <label data-i18n="username">Username</label>
                        <input type="text" id="pl-username" placeholder="username">
                    </div>
                    <div class="form-group">
                        <label data-i18n="password">Password</label>
                        <input type="text" id="pl-password" placeholder="password">
                    </div>
                </div>
                <div id="m3u-fields" class="hidden">
                    <div class="warning-hint" data-i18n="m3uWarning">Prefer API Server if available. M3U only supports live TV and may have compatibility issues.</div>
                    <div class="form-group">
                        <label data-i18n="m3uUrl">URL M3U</label>
                        <input type="text" id="pl-m3u" placeholder="http://example.com/playlist.m3u">
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="saveAndAddAnother()" style="width:100%;" data-i18n="addAnother">+ Add another playlist</button>
            </div>

            <!-- VOD Filter - collapsible -->
            <div id="vod-filter-section" class="card hidden">
                <div class="collapsible-header collapsed" onclick="toggleCollapsible('vod-filter')">
                    <h2 data-i18n="providerFilter">VOD Filter</h2>
                    <span class="arrow">‚ñº</span>
                </div>
                <div id="vod-filter-content" class="collapsible-content collapsed">
                    <div class="form-group" style="margin-top:15px;">
                        <div class="api-desc" data-i18n="providerFilterDesc">Filter VOD categories by language. Auto uses interface language.</div>
                        <select id="pref-provider-lang">
                            <option value="ALL" data-i18n="allLanguages">All languages</option>
                            <option value="AUTO" data-i18n="autoLanguage">Auto (interface language)</option>
                            <option value="FR">üá´üá∑ Fran√ßais</option>
                            <option value="UK">üá¨üáß English</option>
                            <option value="ES">üá™üá∏ Espa√±ol</option>
                            <option value="DE">üá©üá™ Deutsch</option>
                            <option value="IT">üáÆüáπ Italiano</option>
                            <option value="PT">üáµüáπ Portugu√™s</option>
                            <option value="TR">üáπüá∑ T√ºrk√ße</option>
                            <option value="AR">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- VOD Categories - collapsible -->
            <div id="categories-section" class="card hidden">
                <div class="collapsible-header collapsed" onclick="toggleCollapsible('categories')">
                    <h2 data-i18n="categoriesTitle">VOD Categories</h2>
                    <span class="arrow">‚ñº</span>
                </div>
                <div id="categories-content" class="collapsible-content collapsed">
                    <p style="color:#888; margin-bottom:15px; font-size:13px; margin-top:15px;" data-i18n="categoriesDesc">Configure keywords to filter VOD categories</p>

                <!-- Default categories -->
                <div id="default-categories">
                    <!-- Sport -->
                    <div class="category-section" data-category="sport">
                        <div class="category-header">
                            <span class="category-title"><span class="icon">‚öΩ</span><span data-i18n="catSport">Sport</span></span>
                            <button class="category-toggle active" onclick="toggleCategory('sport')" data-i18n="enabled">Enabled</button>
                        </div>
                        <div class="keywords-container" id="keywords-sport"></div>
                        <div class="add-keyword-row">
                            <input type="text" id="new-keyword-sport" data-i18n-placeholder="addKeyword">
                            <button onclick="addKeyword('sport')" data-i18n="add">Add</button>
                        </div>
                    </div>

                    <!-- Entertainment -->
                    <div class="category-section" data-category="entertainment">
                        <div class="category-header">
                            <span class="category-title"><span class="icon">üé≠</span><span data-i18n="catEntertainment">Entertainment</span></span>
                            <button class="category-toggle active" onclick="toggleCategory('entertainment')" data-i18n="enabled">Enabled</button>
                        </div>
                        <div class="subcategory-tabs" id="entertainment-tabs">
                            <div class="subcategory-tab active" data-subcat="concerts" onclick="selectEntSubcat('concerts')">üéµ <span data-i18n="subConcerts">Concerts</span></div>
                            <div class="subcategory-tab" data-subcat="theatre" onclick="selectEntSubcat('theatre')">üé≠ <span data-i18n="subTheatre">Theatre</span></div>
                            <div class="subcategory-tab" data-subcat="spectacles" onclick="selectEntSubcat('spectacles')">üé™ <span data-i18n="subSpectacles">Shows</span></div>
                            <div class="subcategory-tab" data-subcat="blindtest" onclick="selectEntSubcat('blindtest')">üéØ <span data-i18n="subBlindtest">Blind Test</span></div>
                            <div class="subcategory-tab" data-subcat="karaoke" onclick="selectEntSubcat('karaoke')">üé§ <span data-i18n="subKaraoke">Karaoke</span></div>
                        </div>
                        <div class="keywords-container" id="keywords-entertainment"></div>
                        <div class="add-keyword-row">
                            <input type="text" id="new-keyword-entertainment" data-i18n-placeholder="addKeyword">
                            <button onclick="addEntertainmentKeyword()" data-i18n="add">Add</button>
                        </div>
                    </div>

                    <!-- Manga -->
                    <div class="category-section" data-category="manga">
                        <div class="category-header">
                            <span class="category-title"><span class="icon">üéå</span><span data-i18n="catManga">Manga</span></span>
                            <button class="category-toggle active" onclick="toggleCategory('manga')" data-i18n="enabled">Enabled</button>
                        </div>
                        <div class="keywords-container" id="keywords-manga"></div>
                        <div class="add-keyword-row">
                            <input type="text" id="new-keyword-manga" data-i18n-placeholder="addKeyword">
                            <button onclick="addKeyword('manga')" data-i18n="add">Add</button>
                        </div>
                    </div>
                </div>

                <!-- Custom categories -->
                <div class="custom-categories">
                    <h3 style="font-size:12px; color:#666; margin-bottom:10px; text-transform:uppercase; letter-spacing:1px; font-weight:500;" data-i18n="customCategories">Custom categories</h3>
                    <div id="custom-categories-list"></div>

                    <div id="add-category-btn" class="add-custom-category" onclick="showNewCategoryForm()">
                        <span data-i18n="addCategory">+ Add category</span>
                    </div>

                    <div id="new-category-form" class="new-category-form hidden">
                        <div class="form-group">
                            <label data-i18n="categoryName">Category name</label>
                            <input type="text" id="new-cat-name" data-i18n-placeholder="categoryNamePlaceholder">
                        </div>
                        <div class="form-group">
                            <label data-i18n="categoryIcon">Icon</label>
                            <div class="icon-type-tabs">
                                <div class="icon-type-tab active" onclick="selectIconType('emoji')" data-i18n="iconEmoji">Emoji</div>
                                <div class="icon-type-tab" onclick="selectIconType('custom')" data-i18n="iconCustom">Custom</div>
                            </div>
                            <div id="emoji-selector" class="icon-selector">
                                <span class="icon-option selected" data-icon="üçø" onclick="selectIcon(this)">üçø</span>
                                <span class="icon-option" data-icon="üìª" onclick="selectIcon(this)">üìª</span>
                                <span class="icon-option" data-icon="üéÆ" onclick="selectIcon(this)">üéÆ</span>
                                <span class="icon-option" data-icon="üëΩ" onclick="selectIcon(this)">üëΩ</span>
                                <span class="icon-option" data-icon="üöÄ" onclick="selectIcon(this)">üöÄ</span>
                                <span class="icon-option" data-icon="üíÄ" onclick="selectIcon(this)">üíÄ</span>
                                <span class="icon-option" data-icon="üíï" onclick="selectIcon(this)">üíï</span>
                                <span class="icon-option" data-icon="üåç" onclick="selectIcon(this)">üåç</span>
                                <span class="icon-option" data-icon="üé®" onclick="selectIcon(this)">üé®</span>
                                <span class="icon-option" data-icon="ü¶Å" onclick="selectIcon(this)">ü¶Å</span>
                                <span class="icon-option" data-icon="üë∂" onclick="selectIcon(this)">üë∂</span>
                                <span class="icon-option" data-icon="üì∞" onclick="selectIcon(this)">üì∞</span>
                                <span class="icon-option" data-icon="üî¨" onclick="selectIcon(this)">üî¨</span>
                                <span class="icon-option" data-icon="üèÜ" onclick="selectIcon(this)">üèÜ</span>
                                <span class="icon-option" data-icon="üçï" onclick="selectIcon(this)">üçï</span>
                                <span class="icon-option" data-icon="üè∞" onclick="selectIcon(this)">üè∞</span>
                                <span class="icon-option" data-icon="üòÇ" onclick="selectIcon(this)">üòÇ</span>
                                <span class="icon-option" data-icon="‚ö°" onclick="selectIcon(this)">‚ö°</span>
                                <span class="icon-option" data-icon="üîÆ" onclick="selectIcon(this)">üîÆ</span>
                                <span class="icon-option" data-icon="ü§†" onclick="selectIcon(this)">ü§†</span>
                                <span class="icon-option" data-icon="ü•ã" onclick="selectIcon(this)">ü•ã</span>
                            </div>
                            <div id="custom-icon-selector" class="custom-icon-inputs hidden">
                                <input type="text" id="custom-icon-text" maxlength="2" placeholder="" oninput="updateIconPreview()">
                                <input type="color" id="custom-icon-color" value="#ffffff" oninput="updateIconPreview()">
                                <input type="color" id="custom-icon-bg" value="#e50914" oninput="updateIconPreview()">
                                <div class="preview" id="custom-icon-preview"></div>
                            </div>
                        </div>
                        <div style="display:flex; justify-content:flex-end;">
                            <button class="btn btn-secondary" onclick="hideNewCategoryForm()" data-i18n="cancel">Cancel</button>
                            <button class="btn btn-primary" onclick="saveNewCategory()" data-i18n="add">Add</button>
                        </div>
                    </div>
                </div>
                </div><!-- /collapsible-content -->
            </div>

            <!-- Services (proxy + TTS) - collapsible -->
            <div id="services-section" class="card">
                <div class="collapsible-header collapsed" onclick="toggleCollapsible('services')">
                    <h2 data-i18n="servicesTitle">Services (optional)</h2>
                    <span class="arrow">‚ñº</span>
                </div>
                <div id="services-content" class="collapsible-content collapsed">
                    <div class="form-group" style="margin-top:15px;">
                        <div class="api-desc" data-i18n="servicesDesc">Stream proxy and text-to-speech for your TV app.</div>
                    </div>
                    <div class="form-group">
                        <label data-i18n="proxyUrl">Server URL</label>
                        <input type="text" id="pref-proxy-url" placeholder="http://192.168.1.x:8889">
                    </div>
                    <div class="form-group">
                        <label data-i18n="streamProxy">Proxy streams</label>
                        <div class="type-buttons">
                            <button type="button" class="type-btn" id="stream-proxy-off-btn" onclick="toggleStreamProxy(false)" data-i18n="no">No</button>
                            <button type="button" class="type-btn active" id="stream-proxy-on-btn" onclick="toggleStreamProxy(true)" data-i18n="yes">Yes</button>
                        </div>
                    </div>
                    <div id="tts-fields" class="hidden">
                            <div class="form-group">
                                <label data-i18n="ttsRate">TTS Speed</label>
                                <div class="range-row">
                                    <input type="range" id="pref-tts-rate" min="-50" max="100" value="0" step="10" oninput="updateRangeLabel('tts-rate')">
                                    <span id="tts-rate-label" class="range-label">0%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label data-i18n="ttsVolume">TTS Volume</label>
                                <div class="range-row">
                                    <input type="range" id="pref-tts-volume" min="-50" max="100" value="0" step="10" oninput="updateRangeLabel('tts-volume')">
                                    <span id="tts-volume-label" class="range-label">0%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label data-i18n="ttsPitch">TTS Pitch</label>
                                <div class="range-row">
                                    <input type="range" id="pref-tts-pitch" min="-50" max="50" value="0" step="5" oninput="updateRangeLabel('tts-pitch')">
                                    <span id="tts-pitch-label" class="range-label">0Hz</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- APIs - collapsible -->
            <div id="apis-section" class="card">
                <div class="collapsible-header collapsed" onclick="toggleCollapsible('apis')">
                    <h2 data-i18n="apisOptional">APIs (optional)</h2>
                    <span class="arrow">‚ñº</span>
                </div>
                <div id="apis-content" class="collapsible-content collapsed">
                    <div class="form-group" style="margin-top:15px;">
                        <label data-i18n="tmdbKey">TMDB API Key</label>
                        <div class="api-desc"><span data-i18n="tmdbDesc">Posters, descriptions and cast for movies/series.</span> <a href="https://www.themoviedb.org/settings/api" target="_blank" data-i18n="getKey">Get a key</a></div>
                        <input type="text" id="api-tmdb" placeholder="ex: a1b2c3d4e5f6...">
                    </div>
                    <div class="form-group">
                        <label data-i18n="openSubtitlesKey">OpenSubtitles API Key</label>
                        <div class="api-desc"><span data-i18n="openSubtitlesDesc">Automatic subtitles.</span> <a href="https://www.opensubtitles.com/consumers" target="_blank" data-i18n="getKey">Get a key</a></div>
                        <input type="text" id="api-opensubtitles" placeholder="ex: xyz123...">
                    </div>
                    <div class="form-group">
                        <label data-i18n="subdlKey">SubDL API Key</label>
                        <div class="api-desc"><span data-i18n="subdlDesc">Subtitles (alternative).</span> <a href="https://subdl.com/panel/api" target="_blank" data-i18n="getKey">Get a key</a></div>
                        <input type="text" id="api-subdl" placeholder="ex: abc789...">
                    </div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="sendConfig()" style="width:100%; padding: 16px; font-size: 17px; border-radius: 14px;" data-i18n="sendConfig">
                Send configuration
            </button>
            <div id="error-msg" class="error-msg hidden"></div>
        </div>

        <div id="success-step" class="hidden">
            <div class="success-msg">
                <span data-i18n="configSuccess">Configuration sent successfully!</span><br>
                <small style="opacity:0.8;" data-i18n="tvWillConfigure">Your TV will configure automatically.</small><br>
                <small id="reload-countdown" style="opacity:0.6;"></small>
            </div>
        </div>
    </div>

    <script>
        var WORKER_URL = 'https://iptv-config.eric-blanquer.workers.dev';
        var tvCode = '';
        var playlists = [];
        var editingIndex = -1;
        var currentType = 'provider';
        var currentLocale = 'en';

        var translations = {
            fr: {
                tvCode: 'Code TV',
                enterCode: 'Entrez le code affich√© sur votre TV',
                savedPlaylists: 'Playlists enregistr√©es',
                addPlaylist: 'Ajouter une playlist',
                editPlaylist: 'Modifier la playlist',
                nameOptional: 'Nom (optionnel)',
                myPlaylist: 'Ma playlist',
                type: 'Type',
                serverUrl: 'URL du serveur',
                username: 'Identifiant',
                password: 'Mot de passe',
                m3uWarning: 'Pr√©f√©rez Serveur API si disponible. M3U ne supporte que la TV en direct et peut poser des probl√®mes de compatibilit√©.',
                m3uUrl: 'URL M3U',
                addAnother: '+ Ajouter une autre playlist',
                preferences: 'Pr√©f√©rences',
                interfaceLanguage: "Langue de l'interface",
                providerFilter: 'Filtre VOD',
                providerFilterDesc: "Filtre les cat√©gories VOD par langue. Auto utilise la langue de l'interface.",
                allLanguages: 'Toutes les langues',
                autoLanguage: 'Auto (langue interface)',
                apisOptional: 'APIs (optionnel)',
                tmdbKey: 'Cl√© API TMDB',
                tmdbDesc: 'Affiches, descriptions et casting des films/s√©ries.',
                getKey: 'Obtenir une cl√©',
                openSubtitlesKey: 'Cl√© API OpenSubtitles',
                openSubtitlesDesc: 'Sous-titres automatiques.',
                subdlKey: 'Cl√© API SubDL',
                subdlDesc: 'Sous-titres (alternative).',
                sendConfig: 'Envoyer la configuration',
                configSuccess: 'Configuration envoy√©e avec succ√®s !',
                tvWillConfigure: 'Votre TV va se configurer automatiquement.',
                reloadIn: 'Rechargement dans {seconds}s...',
                edit: 'Modifier',
                delete: 'Supprimer',
                playlist: 'Playlist',
                confirmDelete: 'Supprimer cette playlist ?',
                fillProviderFields: 'Veuillez remplir tous les champs serveur',
                addAtLeastOne: 'Ajoutez au moins une playlist',
                errorServer: 'Erreur serveur',
                errorSending: "Erreur lors de l'envoi",
                error: 'Erreur',
                codeLength: 'Le code doit contenir entre 4 et 6 caract√®res',
                categoriesTitle: 'Cat√©gories VOD',
                categoriesDesc: 'Configurez les mots-cl√©s pour filtrer les cat√©gories VOD',
                catSport: 'Sport',
                catEntertainment: 'Divertissement',
                catManga: 'Manga',
                subConcerts: 'Concerts',
                subTheatre: 'Th√©√¢tre',
                subSpectacles: 'Spectacles',
                subBlindtest: 'Blind Test',
                subKaraoke: 'Karaok√©',
                enabled: 'Activ√©',
                disabled: 'D√©sactiv√©',
                addKeyword: 'Ajouter un mot-cl√©...',
                add: 'Ajouter',
                customCategories: 'Cat√©gories personnalis√©es',
                addCategory: '+ Ajouter une cat√©gorie',
                categoryName: 'Nom de la cat√©gorie',
                categoryIcon: 'Ic√¥ne',
                iconEmoji: 'Emoji',
                iconCustom: 'Personnalis√©',
                categoryNamePlaceholder: 'Ma cat√©gorie',
                categoryNameRequired: 'Veuillez entrer un nom de cat√©gorie',
                confirmDeleteCategory: 'Supprimer cette cat√©gorie ?',
                servicesTitle: 'Services (optionnel)',
                servicesDesc: 'Proxy de flux et synth√®se vocale pour votre application TV.',
                proxyUrl: 'URL du serveur',
                yes: 'Oui',
                no: 'Non',
                ttsRate: 'Vitesse TTS',
                ttsVolume: 'Volume TTS',
                ttsPitch: 'Tonalit√© TTS',
                streamProxy: 'Proxy des flux'
            },
            en: {
                tvCode: 'TV Code',
                enterCode: 'Enter the code displayed on your TV',
                savedPlaylists: 'Saved playlists',
                addPlaylist: 'Add a playlist',
                editPlaylist: 'Edit playlist',
                nameOptional: 'Name (optional)',
                myPlaylist: 'My playlist',
                type: 'Type',
                serverUrl: 'Server URL',
                username: 'Username',
                password: 'Password',
                m3uWarning: 'Prefer Serveur API if available. M3U only supports live TV and may have compatibility issues.',
                m3uUrl: 'M3U URL',
                addAnother: '+ Add another playlist',
                preferences: 'Preferences',
                interfaceLanguage: 'Interface language',
                providerFilter: 'VOD filter',
                providerFilterDesc: 'Filter VOD categories by language. Auto uses interface language.',
                allLanguages: 'All languages',
                autoLanguage: 'Auto (interface language)',
                apisOptional: 'APIs (optional)',
                tmdbKey: 'TMDB API Key',
                tmdbDesc: 'Posters, descriptions and cast for movies/series.',
                getKey: 'Get a key',
                openSubtitlesKey: 'OpenSubtitles API Key',
                openSubtitlesDesc: 'Automatic subtitles.',
                subdlKey: 'SubDL API Key',
                subdlDesc: 'Subtitles (alternative).',
                sendConfig: 'Send configuration',
                configSuccess: 'Configuration sent successfully!',
                tvWillConfigure: 'Your TV will configure automatically.',
                reloadIn: 'Reloading in {seconds}s...',
                edit: 'Edit',
                delete: 'Delete',
                playlist: 'Playlist',
                confirmDelete: 'Delete this playlist?',
                fillProviderFields: 'Please fill in all server fields',
                addAtLeastOne: 'Add at least one playlist',
                errorServer: 'Server error',
                errorSending: 'Error sending',
                error: 'Error',
                codeLength: 'The code must be between 4 and 6 characters',
                categoriesTitle: 'VOD Categories',
                categoriesDesc: 'Configure keywords to filter VOD categories',
                catSport: 'Sport',
                catEntertainment: 'Entertainment',
                catManga: 'Manga',
                subConcerts: 'Concerts',
                subTheatre: 'Theatre',
                subSpectacles: 'Shows',
                subBlindtest: 'Blind Test',
                subKaraoke: 'Karaoke',
                enabled: 'Enabled',
                disabled: 'Disabled',
                addKeyword: 'Add keyword...',
                add: 'Add',
                customCategories: 'Custom categories',
                addCategory: '+ Add category',
                categoryName: 'Category name',
                categoryIcon: 'Icon',
                iconEmoji: 'Emoji',
                iconCustom: 'Custom',
                categoryNamePlaceholder: 'My category',
                categoryNameRequired: 'Please enter a category name',
                confirmDeleteCategory: 'Delete this category?',
                servicesTitle: 'Services (optional)',
                servicesDesc: 'Stream proxy and text-to-speech for your TV app.',
                proxyUrl: 'Server URL',
                yes: 'Yes',
                no: 'No',
                ttsRate: 'TTS Speed',
                ttsVolume: 'TTS Volume',
                ttsPitch: 'TTS Pitch',
                streamProxy: 'Proxy streams'
            },
            es: {
                tvCode: 'C√≥digo TV',
                enterCode: 'Ingrese el c√≥digo mostrado en su TV',
                savedPlaylists: 'Playlists guardadas',
                addPlaylist: 'Agregar una playlist',
                editPlaylist: 'Editar playlist',
                nameOptional: 'Nombre (opcional)',
                myPlaylist: 'Mi playlist',
                type: 'Tipo',
                serverUrl: 'URL del servidor',
                username: 'Usuario',
                password: 'Contrase√±a',
                m3uWarning: 'Prefiera Serveur API si est√° disponible. M3U solo soporta TV en vivo y puede tener problemas de compatibilidad.',
                m3uUrl: 'URL M3U',
                addAnother: '+ Agregar otra playlist',
                preferences: 'Preferencias',
                interfaceLanguage: 'Idioma de la interfaz',
                providerFilter: 'Filtro VOD',
                providerFilterDesc: 'Filtra categor√≠as VOD por idioma. Auto usa el idioma de la interfaz.',
                allLanguages: 'Todos los idiomas',
                autoLanguage: 'Auto (idioma interfaz)',
                apisOptional: 'APIs (opcional)',
                tmdbKey: 'Clave API TMDB',
                tmdbDesc: 'P√≥sters, descripciones y reparto de pel√≠culas/series.',
                getKey: 'Obtener una clave',
                openSubtitlesKey: 'Clave API OpenSubtitles',
                openSubtitlesDesc: 'Subt√≠tulos autom√°ticos.',
                subdlKey: 'Clave API SubDL',
                subdlDesc: 'Subt√≠tulos (alternativa).',
                sendConfig: 'Enviar configuraci√≥n',
                configSuccess: '¬°Configuraci√≥n enviada con √©xito!',
                tvWillConfigure: 'Su TV se configurar√° autom√°ticamente.',
                reloadIn: 'Recargando en {seconds}s...',
                edit: 'Editar',
                delete: 'Eliminar',
                playlist: 'Playlist',
                confirmDelete: '¬øEliminar esta playlist?',
                fillProviderFields: 'Por favor complete todos los campos del servidor',
                addAtLeastOne: 'Agregue al menos una playlist',
                errorServer: 'Error del servidor',
                errorSending: 'Error al enviar',
                error: 'Error',
                codeLength: 'El c√≥digo debe tener entre 4 y 6 caracteres',
                categoriesTitle: 'Categor√≠as VOD',
                categoriesDesc: 'Configure palabras clave para filtrar categor√≠as VOD',
                catSport: 'Deporte',
                catEntertainment: 'Entretenimiento',
                catManga: 'Manga',
                subConcerts: 'Conciertos',
                subTheatre: 'Teatro',
                subSpectacles: 'Shows',
                subBlindtest: 'Blind Test',
                subKaraoke: 'Karaoke',
                enabled: 'Activado',
                disabled: 'Desactivado',
                addKeyword: 'Agregar palabra clave...',
                add: 'Agregar',
                customCategories: 'Categor√≠as personalizadas',
                addCategory: '+ Agregar categor√≠a',
                categoryName: 'Nombre de categor√≠a',
                categoryIcon: 'Icono',
                iconEmoji: 'Emoji',
                iconCustom: 'Personalizado',
                categoryNamePlaceholder: 'Mi categor√≠a',
                categoryNameRequired: 'Por favor ingrese un nombre de categor√≠a',
                confirmDeleteCategory: '¬øEliminar esta categor√≠a?',
                servicesTitle: 'Servicios (opcional)',
                servicesDesc: 'Proxy de transmisi√≥n y s√≠ntesis de voz para tu aplicaci√≥n TV.',
                proxyUrl: 'URL del servidor',
                yes: 'S√≠',
                no: 'No',
                ttsRate: 'Velocidad TTS',
                ttsVolume: 'Volumen TTS',
                ttsPitch: 'Tono TTS',
                streamProxy: 'Proxy de flujos'
            },
            de: {
                tvCode: 'TV-Code',
                enterCode: 'Geben Sie den auf Ihrem TV angezeigten Code ein',
                savedPlaylists: 'Gespeicherte Playlists',
                addPlaylist: 'Playlist hinzuf√ºgen',
                editPlaylist: 'Playlist bearbeiten',
                nameOptional: 'Name (optional)',
                myPlaylist: 'Meine Playlist',
                type: 'Typ',
                serverUrl: 'Server-URL',
                username: 'Benutzername',
                password: 'Passwort',
                m3uWarning: 'Bevorzugen Sie Serveur API, falls verf√ºgbar. M3U unterst√ºtzt nur Live-TV und kann Kompatibilit√§tsprobleme haben.',
                m3uUrl: 'M3U-URL',
                addAnother: '+ Weitere Playlist hinzuf√ºgen',
                preferences: 'Einstellungen',
                interfaceLanguage: 'Oberfl√§chensprache',
                providerFilter: 'VOD-Filter',
                providerFilterDesc: 'VOD-Kategorien nach Sprache filtern. Auto verwendet die Oberfl√§chensprache.',
                allLanguages: 'Alle Sprachen',
                autoLanguage: 'Auto (Oberfl√§che)',
                apisOptional: 'APIs (optional)',
                tmdbKey: 'TMDB API-Schl√ºssel',
                tmdbDesc: 'Poster, Beschreibungen und Besetzung f√ºr Filme/Serien.',
                getKey: 'Schl√ºssel erhalten',
                openSubtitlesKey: 'OpenSubtitles API-Schl√ºssel',
                openSubtitlesDesc: 'Automatische Untertitel.',
                subdlKey: 'SubDL API-Schl√ºssel',
                subdlDesc: 'Untertitel (Alternative).',
                sendConfig: 'Konfiguration senden',
                configSuccess: 'Konfiguration erfolgreich gesendet!',
                tvWillConfigure: 'Ihr TV wird automatisch konfiguriert.',
                reloadIn: 'Neuladen in {seconds}s...',
                edit: 'Bearbeiten',
                delete: 'L√∂schen',
                playlist: 'Playlist',
                confirmDelete: 'Diese Playlist l√∂schen?',
                fillProviderFields: 'Bitte f√ºllen Sie alle Server-Felder aus',
                addAtLeastOne: 'F√ºgen Sie mindestens eine Playlist hinzu',
                errorServer: 'Serverfehler',
                errorSending: 'Fehler beim Senden',
                error: 'Fehler',
                codeLength: 'Der Code muss zwischen 4 und 6 Zeichen haben',
                categoriesTitle: 'VOD-Kategorien',
                categoriesDesc: 'Schl√ºsselw√∂rter zum Filtern von VOD-Kategorien konfigurieren',
                catSport: 'Sport',
                catEntertainment: 'Unterhaltung',
                catManga: 'Manga',
                subConcerts: 'Konzerte',
                subTheatre: 'Theater',
                subSpectacles: 'Shows',
                subBlindtest: 'Blind Test',
                subKaraoke: 'Karaoke',
                enabled: 'Aktiviert',
                disabled: 'Deaktiviert',
                addKeyword: 'Schl√ºsselwort hinzuf√ºgen...',
                add: 'Hinzuf√ºgen',
                customCategories: 'Benutzerdefinierte Kategorien',
                addCategory: '+ Kategorie hinzuf√ºgen',
                categoryName: 'Kategoriename',
                categoryIcon: 'Symbol',
                iconEmoji: 'Emoji',
                iconCustom: 'Benutzerdefiniert',
                categoryNamePlaceholder: 'Meine Kategorie',
                categoryNameRequired: 'Bitte geben Sie einen Kategorienamen ein',
                confirmDeleteCategory: 'Diese Kategorie l√∂schen?',
                servicesTitle: 'Dienste (optional)',
                servicesDesc: 'Stream-Proxy und Text-to-Speech f√ºr Ihre TV-App.',
                proxyUrl: 'Server-URL',
                yes: 'Ja',
                no: 'Nein',
                ttsRate: 'TTS-Geschwindigkeit',
                ttsVolume: 'TTS-Lautst√§rke',
                ttsPitch: 'TTS-Tonh√∂he',
                streamProxy: 'Streams proxen'
            },
            it: {
                tvCode: 'Codice TV',
                enterCode: 'Inserisci il codice visualizzato sulla tua TV',
                savedPlaylists: 'Playlist salvate',
                addPlaylist: 'Aggiungi una playlist',
                editPlaylist: 'Modifica playlist',
                nameOptional: 'Nome (opzionale)',
                myPlaylist: 'La mia playlist',
                type: 'Tipo',
                serverUrl: 'URL del server',
                username: 'Nome utente',
                password: 'Password',
                m3uWarning: 'Preferisci Serveur API se disponibile. M3U supporta solo TV in diretta e potrebbe avere problemi di compatibilit√†.',
                m3uUrl: 'URL M3U',
                addAnother: '+ Aggiungi un\'altra playlist',
                preferences: 'Preferenze',
                interfaceLanguage: "Lingua dell'interfaccia",
                providerFilter: 'Filtro VOD',
                providerFilterDesc: "Filtra le categorie VOD per lingua. Auto usa la lingua dell'interfaccia.",
                allLanguages: 'Tutte le lingue',
                autoLanguage: 'Auto (interfaccia)',
                apisOptional: 'APIs (opzionale)',
                tmdbKey: 'Chiave API TMDB',
                tmdbDesc: 'Poster, descrizioni e cast per film/serie.',
                getKey: 'Ottieni una chiave',
                openSubtitlesKey: 'Chiave API OpenSubtitles',
                openSubtitlesDesc: 'Sottotitoli automatici.',
                subdlKey: 'Chiave API SubDL',
                subdlDesc: 'Sottotitoli (alternativa).',
                sendConfig: 'Invia configurazione',
                configSuccess: 'Configurazione inviata con successo!',
                tvWillConfigure: 'La tua TV si configurer√† automaticamente.',
                reloadIn: 'Ricaricamento tra {seconds}s...',
                edit: 'Modifica',
                delete: 'Elimina',
                playlist: 'Playlist',
                confirmDelete: 'Eliminare questa playlist?',
                fillProviderFields: 'Compila tutti i campi del server',
                addAtLeastOne: 'Aggiungi almeno una playlist',
                errorServer: 'Errore del server',
                errorSending: "Errore durante l'invio",
                error: 'Errore',
                codeLength: 'Il codice deve avere tra 4 e 6 caratteri',
                categoriesTitle: 'Categorie VOD',
                categoriesDesc: 'Configura parole chiave per filtrare le categorie VOD',
                catSport: 'Sport',
                catEntertainment: 'Intrattenimento',
                catManga: 'Manga',
                subConcerts: 'Concerti',
                subTheatre: 'Teatro',
                subSpectacles: 'Spettacoli',
                subBlindtest: 'Blind Test',
                subKaraoke: 'Karaoke',
                enabled: 'Abilitato',
                disabled: 'Disabilitato',
                addKeyword: 'Aggiungi parola chiave...',
                add: 'Aggiungi',
                customCategories: 'Categorie personalizzate',
                addCategory: '+ Aggiungi categoria',
                categoryName: 'Nome categoria',
                categoryIcon: 'Icona',
                iconEmoji: 'Emoji',
                iconCustom: 'Personalizzato',
                categoryNamePlaceholder: 'La mia categoria',
                categoryNameRequired: 'Inserisci un nome per la categoria',
                confirmDeleteCategory: 'Eliminare questa categoria?',
                servicesTitle: 'Servizi (opzionale)',
                servicesDesc: 'Proxy streaming e sintesi vocale per la tua app TV.',
                proxyUrl: 'URL del server',
                yes: 'S√¨',
                no: 'No',
                ttsRate: 'Velocit√† TTS',
                ttsVolume: 'Volume TTS',
                ttsPitch: 'Tonalit√† TTS',
                streamProxy: 'Proxy dei flussi'
            },
            pt: {
                tvCode: 'C√≥digo TV',
                enterCode: 'Insira o c√≥digo exibido na sua TV',
                savedPlaylists: 'Playlists salvas',
                addPlaylist: 'Adicionar uma playlist',
                editPlaylist: 'Editar playlist',
                nameOptional: 'Nome (opcional)',
                myPlaylist: 'Minha playlist',
                type: 'Tipo',
                serverUrl: 'URL do servidor',
                username: 'Usu√°rio',
                password: 'Senha',
                m3uWarning: 'Prefira Serveur API se dispon√≠vel. M3U suporta apenas TV ao vivo e pode ter problemas de compatibilidade.',
                m3uUrl: 'URL M3U',
                addAnother: '+ Adicionar outra playlist',
                preferences: 'Prefer√™ncias',
                interfaceLanguage: 'Idioma da interface',
                providerFilter: 'Filtro VOD',
                providerFilterDesc: 'Filtra categorias VOD por idioma. Auto usa o idioma da interface.',
                allLanguages: 'Todos os idiomas',
                autoLanguage: 'Auto (interface)',
                apisOptional: 'APIs (opcional)',
                tmdbKey: 'Chave API TMDB',
                tmdbDesc: 'P√¥steres, descri√ß√µes e elenco de filmes/s√©ries.',
                getKey: 'Obter uma chave',
                openSubtitlesKey: 'Chave API OpenSubtitles',
                openSubtitlesDesc: 'Legendas autom√°ticas.',
                subdlKey: 'Chave API SubDL',
                subdlDesc: 'Legendas (alternativa).',
                sendConfig: 'Enviar configura√ß√£o',
                configSuccess: 'Configura√ß√£o enviada com sucesso!',
                tvWillConfigure: 'Sua TV ser√° configurada automaticamente.',
                reloadIn: 'Recarregando em {seconds}s...',
                edit: 'Editar',
                delete: 'Excluir',
                playlist: 'Playlist',
                confirmDelete: 'Excluir esta playlist?',
                fillProviderFields: 'Preencha todos os campos del servidor',
                addAtLeastOne: 'Adicione pelo menos uma playlist',
                errorServer: 'Erro do servidor',
                errorSending: 'Erro ao enviar',
                error: 'Erro',
                codeLength: 'O c√≥digo deve ter entre 4 e 6 caracteres',
                categoriesTitle: 'Categorias VOD',
                categoriesDesc: 'Configure palavras-chave para filtrar categorias VOD',
                catSport: 'Esporte',
                catEntertainment: 'Entretenimento',
                catManga: 'Manga',
                subConcerts: 'Concertos',
                subTheatre: 'Teatro',
                subSpectacles: 'Espet√°culos',
                subBlindtest: 'Blind Test',
                subKaraoke: 'Karaoke',
                enabled: 'Ativado',
                disabled: 'Desativado',
                addKeyword: 'Adicionar palavra-chave...',
                add: 'Adicionar',
                customCategories: 'Categorias personalizadas',
                addCategory: '+ Adicionar categoria',
                categoryName: 'Nome da categoria',
                categoryIcon: '√çcone',
                iconEmoji: 'Emoji',
                iconCustom: 'Personalizado',
                categoryNamePlaceholder: 'Minha categoria',
                categoryNameRequired: 'Por favor insira um nome de categoria',
                confirmDeleteCategory: 'Excluir esta categoria?',
                servicesTitle: 'Servi√ßos (opcional)',
                servicesDesc: 'Proxy de streaming e s√≠ntese de voz para seu aplicativo de TV.',
                proxyUrl: 'URL do servidor',
                yes: 'Sim',
                no: 'N√£o',
                ttsRate: 'Velocidade TTS',
                ttsVolume: 'Volume TTS',
                ttsPitch: 'Tom TTS',
                streamProxy: 'Proxy de fluxos'
            },
            nl: {
                tvCode: 'TV-code',
                enterCode: 'Voer de code in die op uw TV wordt weergegeven',
                savedPlaylists: 'Opgeslagen afspeellijsten',
                addPlaylist: 'Afspeellijst toevoegen',
                editPlaylist: 'Afspeellijst bewerken',
                nameOptional: 'Naam (optioneel)',
                myPlaylist: 'Mijn afspeellijst',
                type: 'Type',
                serverUrl: 'Server-URL',
                username: 'Gebruikersnaam',
                password: 'Wachtwoord',
                m3uWarning: 'Geef de voorkeur aan Serveur API indien beschikbaar. M3U ondersteunt alleen live TV en kan compatibiliteitsproblemen hebben.',
                m3uUrl: 'M3U-URL',
                addAnother: '+ Nog een afspeellijst toevoegen',
                preferences: 'Voorkeuren',
                interfaceLanguage: 'Interfacetaal',
                providerFilter: 'VOD-filter',
                providerFilterDesc: 'Filter VOD-categorie√´n op taal. Auto gebruikt de interfacetaal.',
                allLanguages: 'Alle talen',
                autoLanguage: 'Auto (interface)',
                apisOptional: 'APIs (optioneel)',
                tmdbKey: 'TMDB API-sleutel',
                tmdbDesc: 'Posters, beschrijvingen en cast voor films/series.',
                getKey: 'Sleutel verkrijgen',
                openSubtitlesKey: 'OpenSubtitles API-sleutel',
                openSubtitlesDesc: 'Automatische ondertitels.',
                subdlKey: 'SubDL API-sleutel',
                subdlDesc: 'Ondertitels (alternatief).',
                sendConfig: 'Configuratie verzenden',
                configSuccess: 'Configuratie succesvol verzonden!',
                tvWillConfigure: 'Uw TV wordt automatisch geconfigureerd.',
                reloadIn: 'Herladen over {seconds}s...',
                edit: 'Bewerken',
                delete: 'Verwijderen',
                playlist: 'Afspeellijst',
                confirmDelete: 'Deze afspeellijst verwijderen?',
                fillProviderFields: 'Vul alle servervelden in',
                addAtLeastOne: 'Voeg ten minste √©√©n afspeellijst toe',
                errorServer: 'Serverfout',
                errorSending: 'Fout bij verzenden',
                error: 'Fout',
                codeLength: 'De code moet tussen 4 en 6 tekens hebben',
                categoriesTitle: 'VOD-categorie√´n',
                categoriesDesc: 'Configureer trefwoorden om VOD-categorie√´n te filteren',
                catSport: 'Sport',
                catEntertainment: 'Entertainment',
                catManga: 'Manga',
                subConcerts: 'Concerten',
                subTheatre: 'Theater',
                subSpectacles: 'Shows',
                subBlindtest: 'Blind Test',
                subKaraoke: 'Karaoke',
                enabled: 'Ingeschakeld',
                disabled: 'Uitgeschakeld',
                addKeyword: 'Trefwoord toevoegen...',
                add: 'Toevoegen',
                customCategories: 'Aangepaste categorie√´n',
                addCategory: '+ Categorie toevoegen',
                categoryName: 'Categorienaam',
                categoryIcon: 'Pictogram',
                iconEmoji: 'Emoji',
                iconCustom: 'Aangepast',
                categoryNamePlaceholder: 'Mijn categorie',
                categoryNameRequired: 'Voer een categorienaam in',
                confirmDeleteCategory: 'Deze categorie verwijderen?',
                servicesTitle: 'Diensten (optioneel)',
                servicesDesc: 'Streamproxy en tekst-naar-spraak voor uw TV-app.',
                proxyUrl: 'Server URL',
                yes: 'Ja',
                no: 'Nee',
                ttsRate: 'TTS-snelheid',
                ttsVolume: 'TTS-volume',
                ttsPitch: 'TTS-toonhoogte',
                streamProxy: 'Streams proxyen'
            },
            pl: {
                tvCode: 'Kod TV',
                enterCode: 'Wprowad≈∫ kod wy≈õwietlany na telewizorze',
                savedPlaylists: 'Zapisane playlisty',
                addPlaylist: 'Dodaj playlistƒô',
                editPlaylist: 'Edytuj playlistƒô',
                nameOptional: 'Nazwa (opcjonalnie)',
                myPlaylist: 'Moja playlista',
                type: 'Typ',
                serverUrl: 'URL serwera',
                username: 'Nazwa u≈ºytkownika',
                password: 'Has≈Ço',
                m3uWarning: 'Preferuj Serveur API, je≈õli dostƒôpne. M3U obs≈Çuguje tylko telewizjƒô na ≈ºywo i mo≈ºe mieƒá problemy z kompatybilno≈õciƒÖ.',
                m3uUrl: 'URL M3U',
                addAnother: '+ Dodaj kolejnƒÖ playlistƒô',
                preferences: 'Preferencje',
                interfaceLanguage: 'Jƒôzyk interfejsu',
                providerFilter: 'Filtr VOD',
                providerFilterDesc: 'Filtruj kategorie VOD wed≈Çug jƒôzyka. Auto u≈ºywa jƒôzyka interfejsu.',
                allLanguages: 'Wszystkie jƒôzyki',
                autoLanguage: 'Auto (interfejs)',
                apisOptional: 'APIs (opcjonalnie)',
                tmdbKey: 'Klucz API TMDB',
                tmdbDesc: 'Plakaty, opisy i obsada film√≥w/seriali.',
                getKey: 'Uzyskaj klucz',
                openSubtitlesKey: 'Klucz API OpenSubtitles',
                openSubtitlesDesc: 'Automatyczne napisy.',
                subdlKey: 'Klucz API SubDL',
                subdlDesc: 'Napisy (alternatywa).',
                sendConfig: 'Wy≈õlij konfiguracjƒô',
                configSuccess: 'Konfiguracja wys≈Çana pomy≈õlnie!',
                tvWillConfigure: 'Tw√≥j telewizor skonfiguruje siƒô automatycznie.',
                reloadIn: 'Prze≈Çadowanie za {seconds}s...',
                edit: 'Edytuj',
                delete: 'Usu≈Ñ',
                playlist: 'Playlista',
                confirmDelete: 'UsunƒÖƒá tƒô playlistƒô?',
                fillProviderFields: 'Wype≈Çnij wszystkie pola serwera',
                addAtLeastOne: 'Dodaj co najmniej jednƒÖ playlistƒô',
                errorServer: 'B≈ÇƒÖd serwera',
                errorSending: 'B≈ÇƒÖd podczas wysy≈Çania',
                error: 'B≈ÇƒÖd',
                codeLength: 'Kod musi mieƒá od 4 do 6 znak√≥w',
                categoriesTitle: 'Kategorie VOD',
                categoriesDesc: 'Skonfiguruj s≈Çowa kluczowe do filtrowania kategorii VOD',
                catSport: 'Sport',
                catEntertainment: 'Rozrywka',
                catManga: 'Manga',
                subConcerts: 'Koncerty',
                subTheatre: 'Teatr',
                subSpectacles: 'Pokazy',
                subBlindtest: 'Blind Test',
                subKaraoke: 'Karaoke',
                enabled: 'W≈ÇƒÖczone',
                disabled: 'Wy≈ÇƒÖczone',
                addKeyword: 'Dodaj s≈Çowo kluczowe...',
                add: 'Dodaj',
                customCategories: 'Kategorie niestandardowe',
                addCategory: '+ Dodaj kategoriƒô',
                categoryName: 'Nazwa kategorii',
                categoryIcon: 'Ikona',
                iconEmoji: 'Emoji',
                iconCustom: 'Niestandardowa',
                categoryNamePlaceholder: 'Moja kategoria',
                categoryNameRequired: 'Proszƒô wprowadziƒá nazwƒô kategorii',
                confirmDeleteCategory: 'UsunƒÖƒá tƒô kategoriƒô?',
                servicesTitle: 'Us≈Çugi (opcjonalne)',
                servicesDesc: 'Proxy strumieniowy i synteza mowy dla aplikacji TV.',
                proxyUrl: 'URL serwera',
                yes: 'Tak',
                no: 'Nie',
                ttsRate: 'Szybko≈õƒá TTS',
                ttsVolume: 'G≈Ço≈õno≈õƒá TTS',
                ttsPitch: 'Ton TTS',
                streamProxy: 'Proxy strumieni'
            },
            ru: {
                tvCode: '–ö–æ–¥ –¢–í',
                enterCode: '–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –Ω–∞ –≤–∞—à–µ–º –¢–í',
                savedPlaylists: '–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã',
                addPlaylist: '–î–æ–±–∞–≤–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç',
                editPlaylist: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç',
                nameOptional: '–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)',
                myPlaylist: '–ú–æ–π –ø–ª–µ–π–ª–∏—Å—Ç',
                type: '–¢–∏–ø',
                serverUrl: 'URL —Å–µ—Ä–≤–µ—Ä–∞',
                username: '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
                password: '–ü–∞—Ä–æ–ª—å',
                m3uWarning: '–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ Serveur API, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ. M3U –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä—è–º–æ–π —ç—Ñ–∏—Ä –∏ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.',
                m3uUrl: 'URL M3U',
                addAnother: '+ –î–æ–±–∞–≤–∏—Ç—å –µ—â–µ –ø–ª–µ–π–ª–∏—Å—Ç',
                preferences: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
                interfaceLanguage: '–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞',
                providerFilter: '–§–∏–ª—å—Ç—Ä VOD',
                providerFilterDesc: '–§–∏–ª—å—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π VOD –ø–æ —è–∑—ã–∫—É. –ê–≤—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.',
                allLanguages: '–í—Å–µ —è–∑—ã–∫–∏',
                autoLanguage: '–ê–≤—Ç–æ (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)',
                apisOptional: 'APIs (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)',
                tmdbKey: '–ö–ª—é—á API TMDB',
                tmdbDesc: '–ü–æ—Å—Ç–µ—Ä—ã, –æ–ø–∏—Å–∞–Ω–∏—è –∏ –∞–∫—Ç–µ—Ä—ã –¥–ª—è —Ñ–∏–ª—å–º–æ–≤/—Å–µ—Ä–∏–∞–ª–æ–≤.',
                getKey: '–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á',
                openSubtitlesKey: '–ö–ª—é—á API OpenSubtitles',
                openSubtitlesDesc: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—É–±—Ç–∏—Ç—Ä—ã.',
                subdlKey: '–ö–ª—é—á API SubDL',
                subdlDesc: '–°—É–±—Ç–∏—Ç—Ä—ã (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞).',
                sendConfig: '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é',
                configSuccess: '–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!',
                tvWillConfigure: '–í–∞—à –¢–í –Ω–∞—Å—Ç—Ä–æ–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.',
                reloadIn: '–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ {seconds}—Å...',
                edit: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å',
                delete: '–£–¥–∞–ª–∏—Ç—å',
                playlist: '–ü–ª–µ–π–ª–∏—Å—Ç',
                confirmDelete: '–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø–ª–µ–π–ª–∏—Å—Ç?',
                fillProviderFields: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è —Å–µ—Ä–≤–µ—Ä–∞',
                addAtLeastOne: '–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø–ª–µ–π–ª–∏—Å—Ç',
                errorServer: '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞',
                errorSending: '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏',
                error: '–û—à–∏–±–∫–∞',
                codeLength: '–ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Ç 4 –¥–æ 6 —Å–∏–º–≤–æ–ª–æ–≤',
                categoriesTitle: '–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ VOD',
                categoriesDesc: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π VOD',
                catSport: '–°–ø–æ—Ä—Ç',
                catEntertainment: '–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è',
                catManga: '–ú–∞–Ω–≥–∞',
                subConcerts: '–ö–æ–Ω—Ü–µ—Ä—Ç—ã',
                subTheatre: '–¢–µ–∞—Ç—Ä',
                subSpectacles: '–®–æ—É',
                subBlindtest: 'Blind Test',
                subKaraoke: '–ö–∞—Ä–∞–æ–∫–µ',
                enabled: '–í–∫–ª—é—á–µ–Ω–æ',
                disabled: '–û—Ç–∫–ª—é—á–µ–Ω–æ',
                addKeyword: '–î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ...',
                add: '–î–æ–±–∞–≤–∏—Ç—å',
                customCategories: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏',
                addCategory: '+ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é',
                categoryName: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏',
                categoryIcon: '–ò–∫–æ–Ω–∫–∞',
                iconEmoji: '–≠–º–æ–¥–∑–∏',
                iconCustom: '–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è',
                categoryNamePlaceholder: '–ú–æ—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è',
                categoryNameRequired: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏',
                confirmDeleteCategory: '–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é?',
                servicesTitle: '–°–µ—Ä–≤–∏—Å—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)',
                servicesDesc: '–ü—Ä–æ–∫—Å–∏ –ø–æ—Ç–æ–∫–æ–≤ –∏ —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ –¥–ª—è –≤–∞—à–µ–≥–æ TV-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.',
                proxyUrl: 'URL —Å–µ—Ä–≤–µ—Ä–∞',
                yes: '–î–∞',
                no: '–ù–µ—Ç',
                ttsRate: '–°–∫–æ—Ä–æ—Å—Ç—å TTS',
                ttsVolume: '–ì—Ä–æ–º–∫–æ—Å—Ç—å TTS',
                ttsPitch: '–¢–æ–Ω TTS',
                streamProxy: '–ü—Ä–æ–∫—Å–∏ –ø–æ—Ç–æ–∫–æ–≤'
            },
            tr: {
                tvCode: 'TV Kodu',
                enterCode: "TV'nizde g√∂r√ºnt√ºlenen kodu girin",
                savedPlaylists: 'Kayƒ±tlƒ± oynatma listeleri',
                addPlaylist: 'Oynatma listesi ekle',
                editPlaylist: 'Oynatma listesini d√ºzenle',
                nameOptional: 'Ad (isteƒüe baƒülƒ±)',
                myPlaylist: 'Oynatma listem',
                type: 'T√ºr',
                serverUrl: 'Sunucu URL',
                username: 'Kullanƒ±cƒ± adƒ±',
                password: '≈ûifre',
                m3uWarning: 'Varsa Serveur API tercih edin. M3U yalnƒ±zca canlƒ± TV destekler ve uyumluluk sorunlarƒ± olabilir.',
                m3uUrl: 'M3U URL',
                addAnother: '+ Ba≈üka oynatma listesi ekle',
                preferences: 'Tercihler',
                interfaceLanguage: 'Aray√ºz dili',
                providerFilter: 'VOD filtresi',
                providerFilterDesc: 'VOD kategorilerini dile g√∂re filtrele. Otomatik, aray√ºz dilini kullanƒ±r.',
                allLanguages: 'T√ºm diller',
                autoLanguage: 'Otomatik (aray√ºz)',
                apisOptional: 'APIs (isteƒüe baƒülƒ±)',
                tmdbKey: 'TMDB API Anahtarƒ±',
                tmdbDesc: 'Film/dizi i√ßin posterler, a√ßƒ±klamalar ve oyuncular.',
                getKey: 'Anahtar al',
                openSubtitlesKey: 'OpenSubtitles API Anahtarƒ±',
                openSubtitlesDesc: 'Otomatik altyazƒ±lar.',
                subdlKey: 'SubDL API Anahtarƒ±',
                subdlDesc: 'Altyazƒ±lar (alternatif).',
                sendConfig: 'Yapƒ±landƒ±rmayƒ± g√∂nder',
                configSuccess: 'Yapƒ±landƒ±rma ba≈üarƒ±yla g√∂nderildi!',
                tvWillConfigure: "TV'niz otomatik olarak yapƒ±landƒ±rƒ±lacak.",
                reloadIn: '{seconds}s i√ßinde yeniden y√ºkleniyor...',
                edit: 'D√ºzenle',
                delete: 'Sil',
                playlist: 'Oynatma listesi',
                confirmDelete: 'Bu oynatma listesini sil?',
                fillProviderFields: 'T√ºm sunucu alanlarƒ±nƒ± doldurun',
                addAtLeastOne: 'En az bir oynatma listesi ekleyin',
                errorServer: 'Sunucu hatasƒ±',
                errorSending: 'G√∂nderme hatasƒ±',
                error: 'Hata',
                codeLength: 'Kod 4 ile 6 karakter arasƒ±nda olmalƒ±dƒ±r',
                categoriesTitle: 'VOD Kategorileri',
                categoriesDesc: 'VOD kategorilerini filtrelemek i√ßin anahtar kelimeler yapƒ±landƒ±rƒ±n',
                catSport: 'Spor',
                catEntertainment: 'Eƒülence',
                catManga: 'Manga',
                subConcerts: 'Konserler',
                subTheatre: 'Tiyatro',
                subSpectacles: 'G√∂steriler',
                subBlindtest: 'Blind Test',
                subKaraoke: 'Karaoke',
                enabled: 'Etkin',
                disabled: 'Devre dƒ±≈üƒ±',
                addKeyword: 'Anahtar kelime ekle...',
                add: 'Ekle',
                customCategories: '√ñzel kategoriler',
                addCategory: '+ Kategori ekle',
                categoryName: 'Kategori adƒ±',
                categoryIcon: 'Simge',
                iconEmoji: 'Emoji',
                iconCustom: '√ñzel',
                categoryNamePlaceholder: 'Kategorim',
                categoryNameRequired: 'L√ºtfen bir kategori adƒ± girin',
                confirmDeleteCategory: 'Bu kategoriyi sil?',
                servicesTitle: 'Hizmetler (isteƒüe baƒülƒ±)',
                servicesDesc: 'TV uygulamanƒ±z i√ßin akƒ±≈ü proxy ve metin-konu≈üma.',
                proxyUrl: 'Sunucu URL',
                yes: 'Evet',
                no: 'Hayƒ±r',
                ttsRate: 'TTS Hƒ±zƒ±',
                ttsVolume: 'TTS Ses D√ºzeyi',
                ttsPitch: 'TTS Tonu',
                streamProxy: 'Akƒ±≈ü proxy'
            },
            ar: {
                tvCode: 'ÿ±ŸÖÿ≤ ÿßŸÑÿ™ŸÑŸÅÿ≤ŸäŸàŸÜ',
                enterCode: 'ÿ£ÿØÿÆŸÑ ÿßŸÑÿ±ŸÖÿ≤ ÿßŸÑŸÖÿπÿ±Ÿàÿ∂ ÿπŸÑŸâ ÿßŸÑÿ™ŸÑŸÅÿ≤ŸäŸàŸÜ',
                savedPlaylists: 'ŸÇŸàÿßÿ¶ŸÖ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©',
                addPlaylist: 'ÿ•ÿ∂ÿßŸÅÿ© ŸÇÿßÿ¶ŸÖÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ',
                editPlaylist: 'ÿ™ÿπÿØŸäŸÑ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ',
                nameOptional: 'ÿßŸÑÿßÿ≥ŸÖ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)',
                myPlaylist: 'ŸÇÿßÿ¶ŸÖÿ© ÿ™ÿ¥ÿ∫ŸäŸÑŸä',
                type: 'ÿßŸÑŸÜŸàÿπ',
                serverUrl: 'ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿÆÿßÿØŸÖ',
                username: 'ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ',
                password: 'ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±',
                m3uWarning: 'ŸäŸÅÿ∂ŸÑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Serveur API ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖÿ™ÿßÿ≠ÿßŸã. M3U ŸäÿØÿπŸÖ ŸÅŸÇÿ∑ ÿßŸÑÿ®ÿ´ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ± ŸàŸÇÿØ ŸäŸàÿßÿ¨Ÿá ŸÖÿ¥ÿßŸÉŸÑ ÿ™ŸàÿßŸÅŸÇ.',
                m3uUrl: 'ÿ±ÿßÿ®ÿ∑ M3U',
                addAnother: '+ ÿ•ÿ∂ÿßŸÅÿ© ŸÇÿßÿ¶ŸÖÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ ÿ£ÿÆÿ±Ÿâ',
                preferences: 'ÿßŸÑÿ™ŸÅÿ∂ŸäŸÑÿßÿ™',
                interfaceLanguage: 'ŸÑÿ∫ÿ© ÿßŸÑŸàÿßÿ¨Ÿáÿ©',
                providerFilter: 'ŸÅŸÑÿ™ÿ± VOD',
                providerFilterDesc: 'ÿ™ÿµŸÅŸäÿ© ŸÅÿ¶ÿßÿ™ VOD ÿ≠ÿ≥ÿ® ÿßŸÑŸÑÿ∫ÿ©. ÿ™ŸÑŸÇÿßÿ¶Ÿä Ÿäÿ≥ÿ™ÿÆÿØŸÖ ŸÑÿ∫ÿ© ÿßŸÑŸàÿßÿ¨Ÿáÿ©.',
                allLanguages: 'ÿ¨ŸÖŸäÿπ ÿßŸÑŸÑÿ∫ÿßÿ™',
                autoLanguage: 'ÿ™ŸÑŸÇÿßÿ¶Ÿä (ÿßŸÑŸàÿßÿ¨Ÿáÿ©)',
                apisOptional: 'APIs (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)',
                tmdbKey: 'ŸÖŸÅÿ™ÿßÿ≠ API TMDB',
                tmdbDesc: 'ŸÖŸÑÿµŸÇÿßÿ™ Ÿàÿ£ŸàÿµÿßŸÅ ŸàŸÖŸÖÿ´ŸÑŸäŸÜ ŸÑŸÑÿ£ŸÅŸÑÿßŸÖ/ÿßŸÑŸÖÿ≥ŸÑÿ≥ŸÑÿßÿ™.',
                getKey: 'ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖŸÅÿ™ÿßÿ≠',
                openSubtitlesKey: 'ŸÖŸÅÿ™ÿßÿ≠ API OpenSubtitles',
                openSubtitlesDesc: 'ÿ™ÿ±ÿ¨ŸÖÿßÿ™ ÿ™ŸÑŸÇÿßÿ¶Ÿäÿ©.',
                subdlKey: 'ŸÖŸÅÿ™ÿßÿ≠ API SubDL',
                subdlDesc: 'ÿ™ÿ±ÿ¨ŸÖÿßÿ™ (ÿ®ÿØŸäŸÑ).',
                sendConfig: 'ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÉŸàŸäŸÜ',
                configSuccess: 'ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÉŸàŸäŸÜ ÿ®ŸÜÿ¨ÿßÿ≠!',
                tvWillConfigure: 'ÿ≥Ÿäÿ™ŸÖ ÿ™ŸÉŸàŸäŸÜ ÿßŸÑÿ™ŸÑŸÅÿ≤ŸäŸàŸÜ ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã.',
                reloadIn: 'ÿ•ÿπÿßÿØÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ ÿÆŸÑÿßŸÑ {seconds} ÿ´ÿßŸÜŸäÿ©...',
                edit: 'ÿ™ÿπÿØŸäŸÑ',
                delete: 'ÿ≠ÿ∞ŸÅ',
                playlist: 'ŸÇÿßÿ¶ŸÖÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ',
                confirmDelete: 'ÿ≠ÿ∞ŸÅ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ Ÿáÿ∞Ÿáÿü',
                fillProviderFields: 'Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿ≠ŸÇŸàŸÑ ÿßŸÑÿÆÿßÿØŸÖ',
                addAtLeastOne: 'ÿ£ÿ∂ŸÅ ŸÇÿßÿ¶ŸÖÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ Ÿàÿßÿ≠ÿØÿ© ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ',
                errorServer: 'ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿÆÿßÿØŸÖ',
                errorSending: 'ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ',
                error: 'ÿÆÿ∑ÿ£',
                codeLength: 'Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿßŸÑÿ±ŸÖÿ≤ ÿ®ŸäŸÜ 4 Ÿà 6 ÿ£ÿ≠ÿ±ŸÅ',
                categoriesTitle: 'ŸÅÿ¶ÿßÿ™ VOD',
                categoriesDesc: 'ÿ™ŸÉŸàŸäŸÜ ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑŸÖŸÅÿ™ÿßÿ≠Ÿäÿ© ŸÑÿ™ÿµŸÅŸäÿ© ŸÅÿ¶ÿßÿ™ VOD',
                catSport: 'ÿ±Ÿäÿßÿ∂ÿ©',
                catEntertainment: 'ÿ™ÿ±ŸÅŸäŸá',
                catManga: 'ŸÖÿßŸÜÿ∫ÿß',
                subConcerts: 'ÿ≠ŸÅŸÑÿßÿ™',
                subTheatre: 'ŸÖÿ≥ÿ±ÿ≠',
                subSpectacles: 'ÿπÿ±Ÿàÿ∂',
                subBlindtest: 'Blind Test',
                subKaraoke: 'ŸÉÿßÿ±ŸäŸàŸÉŸä',
                enabled: 'ŸÖŸÅÿπŸëŸÑ',
                disabled: 'ŸÖÿπÿ∑ŸëŸÑ',
                addKeyword: 'ÿ•ÿ∂ÿßŸÅÿ© ŸÉŸÑŸÖÿ© ŸÖŸÅÿ™ÿßÿ≠Ÿäÿ©...',
                add: 'ÿ•ÿ∂ÿßŸÅÿ©',
                customCategories: 'ŸÅÿ¶ÿßÿ™ ŸÖÿÆÿµÿµÿ©',
                addCategory: '+ ÿ•ÿ∂ÿßŸÅÿ© ŸÅÿ¶ÿ©',
                categoryName: 'ÿßÿ≥ŸÖ ÿßŸÑŸÅÿ¶ÿ©',
                categoryIcon: 'ÿ£ŸäŸÇŸàŸÜÿ©',
                iconEmoji: 'ÿ•ŸäŸÖŸàÿ¨Ÿä',
                iconCustom: 'ŸÖÿÆÿµÿµ',
                categoryNamePlaceholder: 'ŸÅÿ¶ÿ™Ÿä',
                categoryNameRequired: 'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÅÿ¶ÿ©',
                confirmDeleteCategory: 'ÿ≠ÿ∞ŸÅ Ÿáÿ∞Ÿá ÿßŸÑŸÅÿ¶ÿ©ÿü',
                servicesTitle: 'ÿßŸÑÿÆÿØŸÖÿßÿ™ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)',
                servicesDesc: 'ŸàŸÉŸäŸÑ ÿßŸÑÿ®ÿ´ Ÿàÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑŸÜÿµ ÿ•ŸÑŸâ ŸÉŸÑÿßŸÖ ŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ™ŸÑŸÅÿ≤ŸäŸàŸÜ.',
                proxyUrl: 'ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿÆÿßÿØŸÖ',
                yes: 'ŸÜÿπŸÖ',
                no: 'ŸÑÿß',
                ttsRate: 'ÿ≥ÿ±ÿπÿ© TTS',
                ttsVolume: 'ŸÖÿ≥ÿ™ŸàŸâ ÿµŸàÿ™ TTS',
                ttsPitch: 'ŸÜÿ∫ŸÖÿ© TTS',
                streamProxy: 'ŸàŸÉŸäŸÑ ÿßŸÑÿ®ÿ´'
            }
        };

        function t(key, params) {
            var text = (translations[currentLocale] && translations[currentLocale][key]) || translations.en[key] || key;
            if (params) {
                for (var k in params) {
                    text = text.replace('{' + k + '}', params[k]);
                }
            }
            return text;
        }

        function applyTranslations() {
            document.querySelectorAll('[data-i18n]').forEach(function(el) {
                var key = el.getAttribute('data-i18n');
                el.textContent = t(key);
            });
            document.querySelectorAll('[data-i18n-placeholder]').forEach(function(el) {
                var key = el.getAttribute('data-i18n-placeholder');
                el.placeholder = t(key);
            });
            document.documentElement.lang = currentLocale;
        }

        var localeToVodLang = { fr: 'FR', en: 'UK', es: 'ES', de: 'DE', it: 'IT', pt: 'PT', tr: 'TR', ar: 'AR' };
        function syncVodFilterLang(locale) {
            var vodLang = localeToVodLang[locale];
            if (vodLang) document.getElementById('pref-provider-lang').value = vodLang;
        }

        function initLocale() {
            var params = new URLSearchParams(window.location.search);
            var lang = params.get('l');
            if (lang && translations[lang]) {
                currentLocale = lang;
            }
            document.getElementById('page-locale').value = currentLocale;
            applyTranslations();
            syncVodFilterLang(currentLocale);
            document.getElementById('page-locale').addEventListener('change', function() {
                currentLocale = this.value;
                applyTranslations();
                syncVodFilterLang(currentLocale);
            });
        }

        function validateCode() {
            var code = document.getElementById('tv-code').value.trim().toUpperCase();
            if (code.length < 4 || code.length > 6) {
                alert(t('codeLength'));
                return;
            }
            tvCode = code;
            document.getElementById('code-step').classList.add('hidden');
            document.getElementById('config-step').classList.remove('hidden');
        }

        document.getElementById('tv-code').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') validateCode();
        });
        document.getElementById('tv-code').addEventListener('input', function(e) {
            var code = this.value.trim();
            if (code.length >= 6) {
                validateCode();
            }
        });

        function selectType(type) {
            currentType = type;
            document.querySelectorAll('.type-btn').forEach(function(btn) {
                btn.classList.toggle('active', btn.dataset.type === type);
            });
            document.getElementById('provider-fields').classList.toggle('hidden', type !== 'provider');
            document.getElementById('m3u-fields').classList.toggle('hidden', type !== 'm3u');
        }

        function editPlaylist(index) {
            editingIndex = index;
            var p = playlists[index];
            document.getElementById('form-title').textContent = t('editPlaylist');
            document.getElementById('pl-name').value = p.name || '';
            if (p.type === 'provider') {
                document.getElementById('pl-server').value = p.serverUrl || '';
                document.getElementById('pl-username').value = p.username || '';
                document.getElementById('pl-password').value = p.password || '';
                document.getElementById('pl-m3u').value = '';
            } else {
                document.getElementById('pl-m3u').value = p.url || '';
                document.getElementById('pl-server').value = '';
                document.getElementById('pl-username').value = '';
                document.getElementById('pl-password').value = '';
            }
            selectType(p.type);
            document.getElementById('add-playlist-form').scrollIntoView({ behavior: 'smooth' });
        }

        function deletePlaylist(index) {
            if (confirm(t('confirmDelete'))) {
                playlists.splice(index, 1);
                renderPlaylists();
            }
        }

        function saveCurrentPlaylist(silent) {
            var type = currentType;
            var name = document.getElementById('pl-name').value.trim();
            var serverUrl = document.getElementById('pl-server').value.trim();
            var username = document.getElementById('pl-username').value.trim();
            var password = document.getElementById('pl-password').value.trim();
            var m3uUrl = document.getElementById('pl-m3u').value.trim();

            var hasData = false;
            if (type === 'provider') {
                hasData = serverUrl || username || password;
                if (hasData && (!serverUrl || !username || !password)) {
                    if (!silent) alert(t('fillProviderFields'));
                    return false;
                }
            } else {
                hasData = !!m3uUrl;
            }

            if (!hasData) {
                return true;
            }

            var playlist = {
                id: editingIndex >= 0 ? playlists[editingIndex].id : Date.now(),
                name: name,
                type: type
            };

            if (type === 'provider') {
                playlist.serverUrl = serverUrl;
                playlist.username = username;
                playlist.password = password;
            } else {
                playlist.url = m3uUrl;
            }

            if (editingIndex >= 0) {
                playlists[editingIndex] = playlist;
            } else {
                playlists.push(playlist);
            }
            return true;
        }

        function saveAndAddAnother() {
            if (!saveCurrentPlaylist(false)) return;
            resetForm();
            renderPlaylists();
        }

        function resetForm() {
            editingIndex = -1;
            document.getElementById('form-title').textContent = t('addPlaylist');
            document.getElementById('pl-name').value = '';
            document.getElementById('pl-server').value = '';
            document.getElementById('pl-username').value = '';
            document.getElementById('pl-password').value = '';
            document.getElementById('pl-m3u').value = '';
            selectType('provider');
        }

        function renderPlaylists() {
            var html = '';
            var listCard = document.getElementById('playlists-list').parentElement;
            if (playlists.length === 0) {
                listCard.classList.add('hidden');
            } else {
                listCard.classList.remove('hidden');
                playlists.forEach(function(p, i) {
                    var typeLabel = p.type === 'provider' ? 'Serveur API' : 'M3U';
                    html += '<div class="playlist-item">';
                    html += '<div class="info"><div class="name">' + (p.name || t('playlist') + ' ' + (i+1)) + '</div>';
                    html += '<div class="type">' + typeLabel + '</div></div>';
                    html += '<button class="btn btn-secondary" onclick="editPlaylist(' + i + ')">' + t('edit') + '</button>';
                    html += '<button class="btn btn-danger" onclick="deletePlaylist(' + i + ')">' + t('delete') + '</button>';
                    html += '</div>';
                });
                document.getElementById('playlists-list').innerHTML = html;
            }
            // Update categories section visibility
            initCategories();
        }

        var streamProxy = true;

        function toggleStreamProxy(enabled) {
            streamProxy = enabled;
            document.getElementById('stream-proxy-on-btn').classList.toggle('active', enabled);
            document.getElementById('stream-proxy-off-btn').classList.toggle('active', !enabled);
        }

        function checkTTSAvailability() {
            var url = document.getElementById('pref-proxy-url').value.trim();
            if (!url) {
                document.getElementById('tts-fields').classList.add('hidden');
                return;
            }
            var voicesUrl = url.replace(/\/+$/, '') + '/voices?lang=en';
            fetch(voicesUrl, { signal: AbortSignal.timeout(5000) })
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    if (data && data.voices) {
                        document.getElementById('tts-fields').classList.remove('hidden');
                    }
                })
                .catch(function() {
                    document.getElementById('tts-fields').classList.add('hidden');
                });
        }

        document.getElementById('pref-proxy-url').addEventListener('change', checkTTSAvailability);

        function updateRangeLabel(id) {
            var input = document.getElementById('pref-' + id);
            var label = document.getElementById(id + '-label');
            var unit = id === 'tts-pitch' ? 'Hz' : '%';
            var val = parseInt(input.value);
            label.textContent = (val > 0 ? '+' : '') + val + unit;
        }

        function sendConfig() {
            if (!saveCurrentPlaylist(false)) return;

            if (playlists.length === 0) {
                alert(t('addAtLeastOne'));
                return;
            }
            var config = {
                playlists: playlists,
                activePlaylistId: playlists[0].id,
                locale: document.getElementById('page-locale').value,
                providerLanguage: document.getElementById('pref-provider-lang').value,
                tmdbApiKey: document.getElementById('api-tmdb').value.trim(),
                openSubtitlesApiKey: document.getElementById('api-opensubtitles').value.trim(),
                subDLApiKey: document.getElementById('api-subdl').value.trim(),
                categoryPatterns: categoryPatterns,
                hiddenDefaultCategories: hiddenDefaultCategories,
                customCategories: customCategories,
                proxyEnabled: !!document.getElementById('pref-proxy-url').value.trim(),
                streamProxy: document.getElementById('pref-proxy-url').value.trim() ? streamProxy : true,
                proxyUrl: document.getElementById('pref-proxy-url').value.trim(),
                ttsRate: parseInt(document.getElementById('pref-tts-rate').value) || 0,
                ttsVolume: parseInt(document.getElementById('pref-tts-volume').value) || 0,
                ttsPitch: parseInt(document.getElementById('pref-tts-pitch').value) || 0
            };

            document.getElementById('error-msg').classList.add('hidden');

            fetch(WORKER_URL + '/' + tvCode, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(config)
            })
            .then(function(response) {
                if (!response.ok) throw new Error(t('errorServer'));
                return response.json();
            })
            .then(function(data) {
                if (data.ok) {
                    document.getElementById('config-step').classList.add('hidden');
                    document.getElementById('success-step').classList.remove('hidden');
                    startReloadCountdown(5);
                } else {
                    throw new Error(t('errorSending'));
                }
            })
            .catch(function(err) {
                var errorDiv = document.getElementById('error-msg');
                errorDiv.textContent = t('error') + ': ' + err.message;
                errorDiv.classList.remove('hidden');
            });
        }

        function startReloadCountdown(seconds) {
            var countdown = seconds;
            var countdownEl = document.getElementById('reload-countdown');
            function updateCountdown() {
                countdownEl.textContent = t('reloadIn', { seconds: countdown });
                if (countdown <= 0) {
                    window.location.reload();
                } else {
                    countdown--;
                    setTimeout(updateCountdown, 1000);
                }
            }
            updateCountdown();
        }

        // Category management
        var defaultKeywords = {
            sport: ['sport', 'nba', 'nfl', 'moto gp', 'formule 1', 'f1', 'combat', 'football', 'tennis', 'boxing', 'ufc', 'rugby', 'hockey', 'baseball', 'golf', 'racing'],
            entertainment: {
                concerts: ['concert', 'live'],
                theatre: ['theatre', 'th√©√¢tre'],
                spectacles: ['spectacle', 'tv show', 'show'],
                blindtest: ['blind test'],
                karaoke: ['karaoke', 'karaok√©']
            },
            manga: ['manga', 'anime', 'animation', 'japanimation']
        };
        var categoryPatterns = JSON.parse(JSON.stringify(defaultKeywords));
        var hiddenDefaultCategories = [];
        var customCategories = [];
        var selectedIconType = 'emoji';
        var selectedEmoji = '‚öΩ';
        var currentEntSubcat = 'concerts';

        function toggleCollapsible(section) {
            var header = document.querySelector('#' + section + '-section .collapsible-header') ||
                         document.querySelector('#' + section + '-content').previousElementSibling;
            var content = document.getElementById(section + '-content');
            if (header && content) {
                header.classList.toggle('collapsed');
                content.classList.toggle('collapsed');
            }
        }

        function initCategories() {
            var categoriesSection = document.getElementById('categories-section');
            var vodFilterSection = document.getElementById('vod-filter-section');
            var hasProviderPlaylist = playlists.find(function(p) { return p.type === 'provider'; });
            // Show VOD sections if current type is provider OR if a provider playlist exists
            var showVod = currentType === 'provider' || hasProviderPlaylist;
            if (showVod) {
                categoriesSection.classList.remove('hidden');
                vodFilterSection.classList.remove('hidden');
            } else {
                categoriesSection.classList.add('hidden');
                vodFilterSection.classList.add('hidden');
            }
            renderAllKeywords();
            renderCustomCategories();
        }

        function renderAllKeywords() {
            ['sport', 'entertainment', 'manga'].forEach(function(cat) {
                renderKeywords(cat);
            });
        }

        function renderKeywords(category) {
            var container = document.getElementById('keywords-' + category);
            if (!container) return;
            var keywords;
            if (category === 'entertainment') {
                // Entertainment has subcategories
                var ent = categoryPatterns.entertainment || {};
                keywords = ent[currentEntSubcat] || [];
                container.innerHTML = keywords.map(function(kw) {
                    return '<span class="keyword-chip">' + kw + '<span class="remove" onclick="removeEntKeyword(\'' + kw.replace(/'/g, "\\'") + '\')">√ó</span></span>';
                }).join('');
            } else {
                keywords = categoryPatterns[category] || [];
                container.innerHTML = keywords.map(function(kw) {
                    return '<span class="keyword-chip">' + kw + '<span class="remove" onclick="removeKeyword(\'' + category + '\', \'' + kw.replace(/'/g, "\\'") + '\')">√ó</span></span>';
                }).join('');
            }
        }

        function selectEntSubcat(subcat) {
            currentEntSubcat = subcat;
            // Update tabs
            var tabs = document.querySelectorAll('#entertainment-tabs .subcategory-tab');
            tabs.forEach(function(tab) {
                tab.classList.toggle('active', tab.dataset.subcat === subcat);
            });
            renderKeywords('entertainment');
        }

        function addEntertainmentKeyword() {
            var input = document.getElementById('new-keyword-entertainment');
            var keyword = input.value.trim().toLowerCase();
            if (!keyword) return;
            if (!categoryPatterns.entertainment) categoryPatterns.entertainment = {};
            if (!categoryPatterns.entertainment[currentEntSubcat]) categoryPatterns.entertainment[currentEntSubcat] = [];
            if (categoryPatterns.entertainment[currentEntSubcat].indexOf(keyword) === -1) {
                categoryPatterns.entertainment[currentEntSubcat].push(keyword);
                renderKeywords('entertainment');
            }
            input.value = '';
        }

        function removeEntKeyword(keyword) {
            if (!categoryPatterns.entertainment || !categoryPatterns.entertainment[currentEntSubcat]) return;
            var idx = categoryPatterns.entertainment[currentEntSubcat].indexOf(keyword);
            if (idx !== -1) {
                categoryPatterns.entertainment[currentEntSubcat].splice(idx, 1);
                renderKeywords('entertainment');
            }
        }

        function addKeyword(category) {
            var input = document.getElementById('new-keyword-' + category);
            var keyword = input.value.trim().toLowerCase();
            if (!keyword) return;
            if (!categoryPatterns[category]) categoryPatterns[category] = [];
            if (categoryPatterns[category].indexOf(keyword) === -1) {
                categoryPatterns[category].push(keyword);
                renderKeywords(category);
            }
            input.value = '';
        }

        function removeKeyword(category, keyword) {
            var idx = categoryPatterns[category].indexOf(keyword);
            if (idx !== -1) {
                categoryPatterns[category].splice(idx, 1);
                renderKeywords(category);
            }
        }

        function toggleCategory(category) {
            var section = document.querySelector('.category-section[data-category="' + category + '"]');
            var btn = section.querySelector('.category-toggle');
            var idx = hiddenDefaultCategories.indexOf(category);
            if (idx === -1) {
                hiddenDefaultCategories.push(category);
                btn.classList.remove('active');
                btn.classList.add('inactive');
                btn.textContent = t('disabled');
            } else {
                hiddenDefaultCategories.splice(idx, 1);
                btn.classList.remove('inactive');
                btn.classList.add('active');
                btn.textContent = t('enabled');
            }
        }

        function showNewCategoryForm() {
            document.getElementById('add-category-btn').classList.add('hidden');
            document.getElementById('new-category-form').classList.remove('hidden');
        }

        function hideNewCategoryForm() {
            document.getElementById('add-category-btn').classList.remove('hidden');
            document.getElementById('new-category-form').classList.add('hidden');
            document.getElementById('new-cat-name').value = '';
            selectIconType('emoji');
        }

        function selectIconType(type) {
            selectedIconType = type;
            document.querySelectorAll('.icon-type-tab').forEach(function(tab) {
                tab.classList.toggle('active', tab.textContent.toLowerCase().indexOf(type) !== -1 || tab.getAttribute('data-i18n') === 'icon' + type.charAt(0).toUpperCase() + type.slice(1));
            });
            document.getElementById('emoji-selector').classList.toggle('hidden', type !== 'emoji');
            document.getElementById('custom-icon-selector').classList.toggle('hidden', type !== 'custom');
            if (type === 'custom') updateIconPreview();
        }

        function selectIcon(el) {
            document.querySelectorAll('.icon-option').forEach(function(opt) {
                opt.classList.remove('selected');
            });
            el.classList.add('selected');
            selectedEmoji = el.dataset.icon;
        }

        function updateIconPreview() {
            var text = document.getElementById('custom-icon-text').value || 'X';
            var color = document.getElementById('custom-icon-color').value;
            var bg = document.getElementById('custom-icon-bg').value;
            var preview = document.getElementById('custom-icon-preview');
            preview.textContent = text;
            preview.style.color = color;
            preview.style.background = bg;
        }

        function saveNewCategory() {
            var name = document.getElementById('new-cat-name').value.trim();
            if (!name) {
                alert(t('categoryNameRequired'));
                return;
            }
            var icon;
            if (selectedIconType === 'emoji') {
                icon = selectedEmoji;
            } else {
                icon = {
                    type: 'custom',
                    text: document.getElementById('custom-icon-text').value || 'X',
                    color: document.getElementById('custom-icon-color').value,
                    bg: document.getElementById('custom-icon-bg').value
                };
            }
            customCategories.push({
                id: 'custom_' + Date.now(),
                name: name,
                icon: icon,
                keywords: [],
                useTMDB: true
            });
            hideNewCategoryForm();
            renderCustomCategories();
        }

        function renderCustomCategories() {
            var container = document.getElementById('custom-categories-list');
            container.innerHTML = customCategories.map(function(cat, idx) {
                var iconHtml;
                if (typeof cat.icon === 'object' && cat.icon.type === 'custom') {
                    iconHtml = '<span class="custom-icon-preview" style="color:' + cat.icon.color + ';background:' + cat.icon.bg + ';">' + (cat.icon.text || 'X') + '</span>';
                } else {
                    iconHtml = '<span class="icon">' + (cat.icon || 'üìÅ') + '</span>';
                }
                var keywordsHtml = (cat.keywords || []).map(function(kw) {
                    return '<span class="keyword-chip">' + kw + '<span class="remove" onclick="removeCustomKeyword(' + idx + ', \'' + kw.replace(/'/g, "\\'") + '\')">√ó</span></span>';
                }).join('');
                return '<div class="custom-category-item">' +
                    '<div class="custom-category-header">' +
                        '<span class="custom-category-name">' + iconHtml + cat.name + '</span>' +
                        '<button class="btn btn-danger" style="padding:4px 10px;font-size:12px;" onclick="deleteCustomCategory(' + idx + ')">' + t('delete') + '</button>' +
                    '</div>' +
                    '<div class="keywords-container">' + keywordsHtml + '</div>' +
                    '<div class="add-keyword-row">' +
                        '<input type="text" id="new-keyword-custom-' + idx + '" placeholder="' + t('addKeyword') + '">' +
                        '<button onclick="addCustomKeyword(' + idx + ')">' + t('add') + '</button>' +
                    '</div>' +
                '</div>';
            }).join('');
        }

        function addCustomKeyword(idx) {
            var input = document.getElementById('new-keyword-custom-' + idx);
            var keyword = input.value.trim().toLowerCase();
            if (!keyword) return;
            if (!customCategories[idx].keywords) customCategories[idx].keywords = [];
            if (customCategories[idx].keywords.indexOf(keyword) === -1) {
                customCategories[idx].keywords.push(keyword);
                renderCustomCategories();
            }
        }

        function removeCustomKeyword(idx, keyword) {
            var kidx = customCategories[idx].keywords.indexOf(keyword);
            if (kidx !== -1) {
                customCategories[idx].keywords.splice(kidx, 1);
                renderCustomCategories();
            }
        }

        function deleteCustomCategory(idx) {
            if (confirm(t('confirmDeleteCategory'))) {
                customCategories.splice(idx, 1);
                renderCustomCategories();
            }
        }

        // Override selectType to show/hide categories section
        var originalSelectType = selectType;
        selectType = function(type) {
            originalSelectType(type);
            initCategories();
        };

        // Keyboard handling for keyword inputs
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.target.id && e.target.id.startsWith('new-keyword-')) {
                var category = e.target.id.replace('new-keyword-', '');
                if (category.startsWith('custom-')) {
                    addCustomKeyword(parseInt(category.replace('custom-', '')));
                } else if (category === 'entertainment') {
                    addEntertainmentKeyword();
                } else {
                    addKeyword(category);
                }
            }
        });

        initLocale();
        renderPlaylists();
        initCategories();
    </script>
</body>
</html>
